| Actor                   | Command                           | Data              | Event                                | Domain       | Requirement                                                                                                                                                                                                                      |
|-------------------------|-----------------------------------|-------------------|--------------------------------------|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| User                    | Login to tasks dashboard          | Auth info         | User logined in task dashboard       | Task-tracker | Таск-трекер должен быть отдельным дашбордом и доступен всем сотрудникам компании UberPopug Inc.                                                                                                                                  |
|                         |                                   |                   |                                      | Task-tracker | Авторизация в таск-трекере должна выполняться через общий сервис авторизации UberPopug Inc (у нас там инновационная система авторизации на основе формы клюва).                                                                  |
|                         |                                   |                   |                                      | Task-tracker | В таск-трекере должны быть только задачи. Проектов, скоупов и спринтов никому не надо, ибо минимализм.                                                                                                                           |
| User                    | Create task                       | Task data         | Task created                         | Task-tracker | В таск-трекере новые таски может создавать кто угодно. У задачи должны быть описание, статус (выполнена или нет) и попуг, на которого заассайнена задача.                                                                        |
| User[Manager,Admin]     | Assign open tasks                 |                   | Task assigned*                       | Task-tracker | Менеджеры или администраторы должны иметь кнопку «заассайнить задачи», которая возьмет все открытые задачи и рандомно заассайнит каждую на любого из сотрудников. Не успел закрыть задачу до реассайна — сорян, делай следующую. |
|                         |                                   |                   |                                      | Task-tracker | Дополнение: Ассайнить задачу можно на кого угодно, это может быть любой аккаунт из системы.                                                                                                                                      |
|                         |                                   |                   |                                      | Task-tracker | Дополнение: Ассайнить задачу можно только кнопкой «заассайнить задачи»                                                                                                                                                           |
|                         |                                   |                   |                                      | Task-tracker | Дополнение: при нажатии кнопки «заассайнить задачи» все текущие не закрытые задачи должны быть случайным образом перетасованы между каждым аккаунтом в системе                                                                   |
|                         |                                   |                   |                                      | Task-tracker | Дополнение: мы не заморачиваемся на ограничение по нажатию на кнопку «заассайнить задачи». Ее можно нажимать хоть каждую секунду.                                                                                                |
|                         |                                   |                   |                                      | Task-tracker | Дополнение: на одного сотрудника может выпасть любое количество новых задач, может выпасть нуль, а может и 10.                                                                                                                   |
| User                    | Query: View tasks                 |                   |                                      | Task-tracker | Каждый сотрудник должен иметь возможность видеть в отдельном месте список заассайненных на него задач                                                                                                                            |
| User                    | Mark task completed               | Task data         | Task completed                       | Task-tracker | Каждый сотрудник может отметить задачу выполненной.                                                                                                                                                                              |
| Task assigned           | Send task reminder                | Task data         | Task reminder sent                   | Task-tracker | После ассайна новой задачи сотруднику должно приходить оповещение на почту, в слак и в смс.                                                                                                                                      |
| User[Admin,Accountant]  | Login to accounting dashboard     | Auth info         | User logined in accounting dashboard | Accounting   | Аккаунтинг должен быть в отдельном дашборде и доступным только для администраторов и бухгалтеров.                                                                                                                                |
|                         |                                   |                   |                                      | Accounting   | Авторизация в таск-трекере должна выполняться через общий сервис аунтификации UberPopug Inc.                                                                                                                                     |
| ???                     |                                   |                   |                                      | Accounting   | У каждого из сотрудников должен быть свой счет, который показывает, сколько за сегодня он получил денег. У счета должен быть аудитлог того, за что были списаны или начислены деньги, с подробным описанием каждой из задач.     |
|                         |                                   |                   |                                      | Accounting   | Расценки:                                                                                                                                                                                                                        |
| Task created            | Assign task costs                 | Task data         | Task costs assigned                  | Accounting   | Дополнение: цена на задачу определяется единоразово, в момент ее появления в системе (можно с минимальной задержкой)                                                                                                             |
| Task assigned           | Created audit log entry           |                   | Audit log entry created              | Accounting   | у сотрудника появилась новая задача — rand(-10..-20)$                                                                                                                                                                            |
| Task completed          | Created audit log entry           |                   | Audit log entry created              | Accounting   | сотрудник выполнил задачу — rand(20..40)$                                                                                                                                                                                        |
| Audit log entry created | Recalculate user balance          |                   | User balance recalculated            | Accounting   | Дополнение: деньги списываются сразу после ассайна на сотрудника, а начисляются после выполнения задачи.                                                                                                                         |
|                         |                                   |                   |                                      | Accounting   | Дополнение: отрицательный баланс переносится на следующий день. Единственный способ его погасить - закрыть достаточное количество задач в течении дня.                                                                           |
|                         |                                   |                   |                                      | Accounting   | Вверху выводить количество заработанных топ менеджером за сегодня денег.                                                                                                                                                         |
|                         |                                   |                   |                                      | Accounting   | Дополнение: т.е. сумма всех закрытых и созданных задач за день с противоположным знаком: (sum(completed task amount) + sum(created task fee)) * -1                                                                               |
| Cron: end of day        | Pay user earnings                 | User day earnings | User day earnings paid               | Accounting   |                                                                                                                                                                                                                                  |
| User day earnings paid  | Send user day earning info        | User day earnings | User day earnings sent               | Accounting   | В конце дня необходимо считать, сколько денег сотрудник получил за рабочий день, слать на почту сумму выплаты.                                                                                                                   |
| User day earnings paid  | Created audit log entry           |                   | Audit log entry created              | Accounting   | После выплаты баланса (в конце дня) он должен обнуляться и в аудитлоге должно быть отображено, что была выплачена сумма.                                                                                                         |
|                         |                                   |                   |                                      | Accounting   | Дашборд должен выводить информацию по дням, а не за весь период сразу.                                                                                                                                                           |
|                         |                                   |                   |                                      | Accounting   | изначально хватит только за сегодня. если чувствуете, что успеете сделать аналитику за каждый день недели - будет круто                                                                                                          |
| User[Admin]             | Login to analytics dashboard      | Auth info         | User logined in analytics dashboard  | Analytics    | Аналитика — это отдельный дашборд, доступный только админам.                                                                                                                                                                     |
| User[Admin]             | Query: View management earnings   |                   |                                      | Analytics    | Нужно указывать, сколько заработал топ-менеджмент за сегодня: сколько попугов ушло в минус.                                                                                                                                      |
| User[Admin]             | Query: Show a most expensive task |                   |                                      | Analytics    | Нужно показывать самую дорогую задачу за: день, неделю и месяц.                                                                                                                                                                  |
|                         |                                   |                   |                                      | Analytics    | Дополнение: самой дорогой задачей является задача с наивысшей ценной из списка всех закрытых задач за определенный период времени                                                                                                |
|                         |                                   |                   |                                      | Analytics    | Дополнение: пример того, как это может выглядеть:                                                                                                                                                                                |
|                         |                                   |                   |                                      | Analytics    | 03.03 - самая дорогая задача - 28$ 02.03 - самая дорогая задача - 38$ 01.03 - самая дорогая задача - 23$ 01-03 марта - самая дорогая задача - 38$                                                                                |
